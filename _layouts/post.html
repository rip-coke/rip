<html lang="en">
  <head>
    {% include head.html %}
  </head>

  <body class="flex flex-col min-h-screen font-roboto">
    {% include header.html %}
    <div id="content" class="bg-white py-6 sm:py-6">
      <div class="mx-auto max-w-7xl px-6 lg:px-4">
        <div
          class="mx-auto mt-3 grid max-w-2xl grid-cols-1 gap-x-4 gap-y-4 lg:mx-0 lg:max-w-none lg:grid-cols-2"
        >
          <div class="relative w-full">
            <div class="swiper swiper-container">
              <div class="swiper-wrapper">
                {% assign pic = page.pic | split: '.' %}
                {% assign files = site.static_files %}
                {% for file in files %}
                  {% if file.path contains pic[0] %} 
                    {% if file.path contains "tree" %} 
                    {% else %}
                      <div class="swiper-slide align-middle md:align-middle">
                        <img src="{{file.path}}" alt="picture of {{page.name}}"/>
                      </div>
                    {% endif %}
                  {% endif %}
                {% endfor %} 
              </div>
              <div class="swiper-pagination"></div>
              <div class="swiper-button-next"></div>
              <div class="swiper-button-prev"></div>
            </div>

            <!-- <div class="absolute inset-0 rounded-2xl ring-1 ring-inset ring-gray-900/10"></div> -->
          </div>
          <div class="w-full px-4">
            <div class="flex items-center gap-x-4 text-s">
              <div class="flex-auto font-semibold text-lg pb-2">
                {{page.name}}
              </div>
              
      
              <div class="flex items-right">
                {% assign share_url = "https://wa.me/?text=" | append: site.url | append: page.url %}

                <a href="{{share_url}}"
                  target="_blank">
                  <div class="grid grid-cols-2 gap-2">
                    <div >
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z" />
                      </svg>
                    </div>
                  </div>                  
                </a>
              </div>
            </div>
            
            <div class="flex items-center gap-x-4 text-s">
              <div class="flex-auto">
                <time datetime="2020-03" class="text-gray-500"
                  >{{page.dob | date: "%d %b %y" }}</time
                >
                -
                <time datetime="2020-03" class="text-gray-500"
                  >{{page.dod | date: "%d %b %y" }}</time
                >
              </div>
              <div class="flex items-right">
                <a href="{{share_url}}" target="_blank">
                  Share
                </a>
              </div>
            </div>
            <div class="flex items-center gap-x-4 text-s">
              <div class="flex-auto">
                <div class="flex items-right">{{page.county}}</div>
              </div>
              <div class="flex items-right"></div>
            </div>
            <!-- Tabs: Details / Notes (Notes has a scrollable window) -->
            <div class="mt-6">
              <div class="">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                  <button id="tab-notes-btn" class="w-full px-4 py-2 mt-10 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-yellow-500 rounded-md hover:bg-yellow-600 focus:outline-none focus:bg-yellow-600" aria-selected="false">Obituary</button>
                  <button id="tab-details-btn" class="w-full px-4 py-2 mt-10 font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-yellow-500 rounded-md hover:bg-yellow-600 focus:outline-none focus:bg-yellow-600" aria-controls="tab-details" aria-selected="true">Condolences</button>
                </nav>
              </div>

              <div id="tab-details" class="mt-4 flex flex-col h-screen overflow-hidden hidden">
                {% if page.comments %} 
                  <div id="disqus_thread" class="flex-1 overflow-y-scroll"></div>
                  <script>
                      /**
                      *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                      *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
                      var disqus_config = function () {
                        this.page.url = "{{ site.url }}{{ page.url }}";  // Replace PAGE_URL with your page's canonical URL variable
                        this.page.identifier = "{{ page.id }}"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                      };
                      (function() { // DON'T EDIT BELOW THIS LINE
                      var d = document, s = d.createElement('script');
                      s.src = 'https://rip-ke.disqus.com/embed.js';
                      s.setAttribute('data-timestamp', +new Date());
                      (d.head || d.body).appendChild(s);
                      })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                {% endif %}
              </div>

              <div id="tab-notes"  class="group relative">
                <p class="mt-5 line-clamp-3 text-sm leading-6 text-gray-600">
                  
                  {{ page.content }}
                </p>
              </div>
              
            </div>

            <script>
              (function(){
                const detailsBtn = document.getElementById('tab-details-btn');
                const notesBtn = document.getElementById('tab-notes-btn');
                const details = document.getElementById('tab-details');
                const notes = document.getElementById('tab-notes');

                function showDetails(){
                  details.classList.remove('hidden');
                  notes.classList.add('hidden');
                  detailsBtn.classList.add('border-yellow-500','text-gray-900');
                  notesBtn.classList.remove('border-yellow-500','text-gray-900');
                  detailsBtn.setAttribute('aria-selected','true');
                  notesBtn.setAttribute('aria-selected','false');
                }
                function showNotes(){
                  notes.classList.remove('hidden');
                  details.classList.add('hidden');
                  notesBtn.classList.add('border-yellow-500','text-gray-900');
                  detailsBtn.classList.remove('border-yellow-500','text-gray-900');
                  notesBtn.setAttribute('aria-selected','true');
                  detailsBtn.setAttribute('aria-selected','false');
                }

                detailsBtn.addEventListener('click', showDetails);
                notesBtn.addEventListener('click', showNotes);
              })();
            </script>
          </div>
          <script>
            var swiper = new Swiper('.swiper-container', {
            loop: true,
            autoplay: {
                delay: 3000,
                disableOnInteraction: false
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            });
          </script>
        </div>
      </div>
    </div>
    {% include footer.html %}
  </body>
</html>
